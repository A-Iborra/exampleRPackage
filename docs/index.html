<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An example R data package • exampleDataPackage</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">exampleDataPackage</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="exampledatapackage" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#exampledatapackage" class="anchor"></a>exampleDataPackage</h1></div>
<p>This is an example on how to create a data product by creating an R data package.</p>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Anyone can obtain the data by downloading the .csv files from <code>data-raw/</code>, or easily from within R:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"mvuorre/exampleDataPackage"</span>)</code></pre></div>
<p>Then, to make the example data available in an R session:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(exampleDataPackage)
<span class="kw">head</span>(exampleData)
<span class="co">#&gt;   group     score</span>
<span class="co">#&gt; 1     a  97.18260</span>
<span class="co">#&gt; 2     a  86.87440</span>
<span class="co">#&gt; 3     a 107.95184</span>
<span class="co">#&gt; 4     a 102.70070</span>
<span class="co">#&gt; 5     a  97.22694</span>
<span class="co">#&gt; 6     a  94.33976</span></code></pre></div>
</div>
</div>
<div id="how-the-package-was-created" class="section level1">
<h1 class="hasAnchor">
<a href="#how-the-package-was-created" class="anchor"></a>How the package was created</h1>
<p>First, use R Studio to create a new R Package. Delete <code>man/hello.Rd</code> and <code>R/hello.R</code>.</p>
<p>Then:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">use_readme_rmd</span>()</code></pre></div>
<p>Make changes to <code>README.Rmd</code>, then click Knit.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">use_data_raw</span>()</code></pre></div>
<p>Put data files (in this case simulate) to <code>data-raw/</code>. Write <code>preprocess.r</code> in same folder, which outputs cleaned data .csv, and uses <code>devtools::use_data()</code> to create R data object in <code>data/</code>. Create <code>R/data.R</code> that describes the data (i.e. is its metadata):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#' Scores of Group A and Group B.</span>
<span class="co">#'</span>
<span class="co">#' A data set with the scores of two groups, Group A and Group B.</span>
<span class="co">#'</span>
<span class="co">#' @format A data frame with 53940 rows and 10 variables:</span>
<span class="co">#' \describe{</span>
<span class="co">#'   \item{group}{Participant's group, A or B.}</span>
<span class="co">#'   \item{score}{The participant's score in hypothetical task Z.}</span>
<span class="co">#' }</span>
<span class="co">#' @source \url{https://www.github.com/mvuorre/exampleDataPackage}</span>
<span class="st">"exampleData"</span></code></pre></div>
<ul>
<li>Delete NAMESPACE if present</li>
<li>Run <code>devtools::document()</code>
</li>
</ul>
<p>Edit DESCRIPTION:</p>
<ul>
<li>add Depends: R (&gt;= 3.1.0)</li>
</ul>
<p>Run <code>devtools::use_mit_license()</code> (or gpl3…).</p>
<p>Then go to R Studio’s <strong>Build</strong> tab, and click “Build &amp; Reload”. If everything went well, this should build the R package you have just created, and loads it into your current R workspace. You can then use your data simply by calling the name of the data object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(exampleData)
<span class="co">#&gt;   group     score</span>
<span class="co">#&gt; 1     a  97.18260</span>
<span class="co">#&gt; 2     a  86.87440</span>
<span class="co">#&gt; 3     a 107.95184</span>
<span class="co">#&gt; 4     a 102.70070</span>
<span class="co">#&gt; 5     a  97.22694</span>
<span class="co">#&gt; 6     a  94.33976</span></code></pre></div>
<p>Of course, if you just wanted to use your own data right now, there is little point in doing the extra work described here. However, the true benefits become apparent when you want to come back to the data in a few months time. It will be available to you with the above command, with full documentation. Furthermore, the data product is now easily shared with others, as described next.</p>
</div>
<div id="how-to-share-the-data-product" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-share-the-data-product" class="anchor"></a>How to share the data product</h1>
<p>The easiest way to share the data product is to create the R package as a Git repository (see our tutorial on Git + GitHub: <a href="https://github.com/mvuorre/reproguide-curate" class="uri">https://github.com/mvuorre/reproguide-curate</a>). Once the R package’s source code is pushed to GitHub, authorized users (by default, anyone) can browse it on GitHub and manually download any files they’d like (e.g. the raw data files.) Importantly, they can obtain the data very easily from within R by installing the R package you have just created:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"mvuorre/exampleDataPackage"</span>)
<span class="co">#&gt; Downloading GitHub repo mvuorre/exampleDataPackage@master</span>
<span class="co">#&gt; from URL https://api.github.com/repos/mvuorre/exampleDataPackage/zipball/master</span>
<span class="co">#&gt; Installation failed: Not Found (404)</span></code></pre></div>
<p>The above command, when executed in R, downloads and installs the <code>exampleDataPackage</code> from GitHub user <code>mvuorre</code>.</p>
</div>
<div id="advanced-topics" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-topics" class="anchor"></a>Advanced topics</h1>
<div id="documenting-analysis-as-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#documenting-analysis-as-vignette" class="anchor"></a>Documenting analysis as vignette</h2>
<p>It is also helpful to share the full analysis code in which the data was used. This is naturally written as an R script, which can easily be turned into an <em>R package vignette</em>. To initiate a vignette, use</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">use_vignette</span>(<span class="st">"Example-Analysis"</span>)</code></pre></div>
<p>This creates a vignette template, into which you can write normal R Markdown code. See <code>vignettes/Example-Analysis.Rmd</code> for an example.</p>
</div>
<div id="creating-a-website-for-the-r-data-package" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-website-for-the-r-data-package" class="anchor"></a>Creating a website for the R data package</h2>
<p>You can even create a website for the data package. For this, you need the <a href="https://hadley.github.io/pkgdown/">pkgdown</a> R package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"hadley/pkgdown"</span>)</code></pre></div>
<p>You will need to change</p>
<pre><code>output:
  md_document:
    variant: markdown_github</code></pre>
<p>to</p>
<pre><code>output: rmarkdown::github_document</code></pre>
<p>at the top of the <code>README.Rmd</code> file.</p>
<p>To create the website, simply run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pkgdown<span class="op">::</span><span class="kw">build_site</span>()</code></pre></div>
<p>The website is now available at <code>docs/index.html</code>. To make the website available to others, you will want to host it somewhere in the internet. The easiest option, again, is to host it on GitHub. Assuming you have created the package in a local Git repository and have synced the repository to GitHub, this is easy. Push all the current changes to GitHub, and then go to the package’s GitHub website, click “Settings”, and scroll down to “GitHub Pages”. There, click on the “Source” pull-down menu that currently says “None”, and choose the “master branch /docs folder”. Save the changes. After a little while, the page will be visible at <a href="https://username.github.io/packagename" class="uri">https://username.github.io/packagename</a>. For example, <code>exampleDataPackage</code>’s website is at <a href="https://mvuorre.github.io/exampleDataPackage" class="uri">https://mvuorre.github.io/exampleDataPackage</a>.</p>
<p>Thank you for reading.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Matti Vuorre <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matti Vuorre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
